<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Medical Shop</title>
    <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 0;
      height: 100vh;
    }

    .form-card {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      max-width: 900px;
      margin: 20px auto;
    }

    h1 {
      font-size: 26px;
      color: #2c3e50;
	  padding-left: 35%;
    }
	svg{
		width:30px;
	}
    p {
      font-size: 15px;
      color: #555;
      text-align: center;
      margin-bottom: 20px;
      margin-top: -10px;
    }

    .form-header {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #34495e;
    }

    .form-row {
      display: flex;
      gap: 15px;
      align-items: flex-end;
    }

    .form-group {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: bold;
      margin-bottom: 5px;
      color: #555;
    }

    .form-group input {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .form-row button {
      padding: 12px 60px;
      background: #007bff;
      border: none;
      color: #fff;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .form-row button:hover {
      background: #0056b3;
    }

    .container {
      max-width: 950px;
      margin: 20px auto;
      padding: 10px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      border:0.5px solid #ddd;
    }

    h2 {
      text-align: left;
      color: #0d6efd;
      padding-top:10px;
      padding-left:5px;
      
    }

    .card {
      border-left: 5px solid #0d6efd;
      padding-left: 20px;
      padding-right: 20px;
      padding-top:10px;
      background: #fff;
      border-radius: 10px;
      margin-top: 7px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border:0.5px solid #ddd;
      
    }

    .btn-danger {
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    .btn-danger:hover {
      background: #b02a37;
    }

    .btn-toggle {
      display: block;
      margin: 20px auto;
      background: #28a745;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-toggle:hover {
      background: #1e7e34;
    }
/* --- Show/Print Buttons --- */
.btn-toggle {
    display: inline-block;
    margin: 10px;
    padding: 12px 28px;
    background: #28a745;         /* Green for Show Bill */
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 15px;
    transition: 0.3s ease;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.btn-toggle:hover {
    background: #1e7e34;
}

/* Purple Print Bill Button override */
.btn-toggle.print {
    background: #6f42c1;         /* Purple for Print Bill */
}
.btn-toggle.print:hover {
    background: #5a32a3;
}

/* --- Final Bill Box --- */
.bill-box {
    max-width: 700px;
    margin: 30px auto;
    background: #ffffff;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.15);
    border: 1px solid #ddd;
    font-family: Arial, sans-serif;
    display: none;               /* Hidden until toggled */
    animation: fadeIn 0.4s ease-in-out;
}

.bill-box h2 {
    text-align: center;
    font-size: 24px;
    margin-bottom: 15px;
    color: #2c3e50;
    font-weight: bold;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
}

.bill-box p {
    font-size: 16px;
    margin: 8px 0;
    color: #333;
}

/* --- Fade In Animation --- */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

    </style>
</head>
<body>
 <div style="display:flex; justify-content:space-between; align-items:center; padding: 0 40px;">
      <h1><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M128 176C128 149.5 149.5 128 176 128C202.5 128 224 149.5 224 176L224 288L128 288L128 176zM64 176L64 464C64 525.9 114.1 576 176 576C237.9 576 288 525.9 288 464L288 358.2L404.3 527.7C439.8 579.4 509.6 592 560.3 555.8C611 519.6 623.3 448.3 587.8 396.6L459.3 209.3C423.8 157.6 354 145 303.3 181.2C297.7 185.2 292.6 189.6 288 194.3L288 176C288 114.1 237.9 64 176 64C114.1 64 64 114.1 64 176zM328.6 304.2C312.6 280.9 318.6 248.9 340.5 233.2C361.7 218.1 391 222.9 406.5 245.4L473.5 343L393.6 398.9L328.6 304.1z"/></svg> MedBill Smart Saver</h1>
      <a th:href="@{'/adddb'}" class="btn-toggle">Add Medicine</a>
  </div>
      
    <p>Efficient medicine billing with automatic discount calculations</p>

    <!-- Medicine form -->
    <div class="form-card">
      <div class="form-header">Add Medicine</div>
      <form action="/addMedicine" method="post">
        <div class="form-row">
          <div class="form-group">
            <label for="medicineName">Medicine Name</label>
            <input type="text" id="medicineName" name="medicineName" placeholder="enter medicine name" required>
          </div>
          <div class="form-group">
            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" name="quantity" placeholder="enter Quantity" required>
          </div>
          <button type="submit">Add Medicine</button>
        </div>
      </form>
    </div>

    <!-- Medicine Cart -->
    <div th:if="${cart != null and !cart.isEmpty()}" class="container">
        <h2>Medicine Cart</h2>

        <div th:each="item : ${cart}" class="card">
            <div>
                <strong th:text="${item.name}"></strong>
                <p>
                    Qty: <span th:text="${item.quantity}"></span> |
                    Price: ₹<span th:text="${item.price}"></span> |
                    Discount: <span th:text="${item.discount}"></span> |
                    Total: ₹<span th:text="${item.total}"></span>
                </p>
            </div>
            <a th:href="@{'/delete/' + ${item.name}}" class="btn-danger">Delete</a>
        </div>

        <!-- Show Bill button -->
    </div>
    <div th:if="${cart != null and !cart.isEmpty()}" style="text-align:center; margin-top:20px;">
    <button type="button" class="btn-toggle" onclick="toggleBill()">Show Bill</button>
    <a href="/bill" target="_blank">
        <button type="button" class="btn-toggle print">Print Bill</button>
    </a>
</div>

<div class="bill-box" id="billBox" th:if="${cart != null and !cart.isEmpty()}">
    <h2>Medical Bill</h2>
    <p><b>Date:</b> <span th:text="${date}"></span></p>
    <p><b>Total Quantity:</b> <span th:text="${totalQty}"></span></p>
    <p><b>Subtotal:</b> ₹<span th:text="${subtotal}"></span></p>
</div>

    <script>
      function toggleBill() {
        let box = document.getElementById("billBox");
        if (box.style.display === "none" || box.style.display === "") {
          box.style.display = "block";
        } else {
          box.style.display = "none";
        }
      }
    </script>
</body>
</html>
